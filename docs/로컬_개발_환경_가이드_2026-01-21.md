# 🚀 로컬 개발 환경 가이드

**작성일**: 2026-01-21  
**목적**: 로컬 개발 환경에서만 테스트 (Vercel 배포 없이)  
**상태**: ✅ 로컬 개발 환경 최적화 완료

---

## 🎯 개발 방식

**프로덕션 환경 사용 안 함**:
- Vercel 배포 없이 로컬에서만 개발 및 테스트
- GitHub 푸시는 코드 저장용 (배포 자동화 없음)
- 로컬 개발 서버에서 직접 확인

---

## 📋 로컬 개발 환경 설정

### 1. 필수 준비 사항

- ✅ **로컬 PC 24시간 가동** (이미 설정됨)
- ✅ **Ollama 서비스 실행 중** (`http://localhost:11434`)
- ✅ **Node.js 설치** (npm 사용)

### 2. 개발 서버 실행

```bash
cd projects/mkm/mkm-study20260120
npm install  # 최초 1회만
npm run dev
```

**접속 URL**: `http://localhost:5173`

---

## 🔧 Vite 프록시 설정

**CORS 문제 해결**:
- 브라우저에서 `localhost:11434` 직접 접근 시 CORS 에러 발생
- Vite 프록시를 통해 `/api/ollama` → `localhost:11434` 자동 전환

**설정 위치**: `vite.config.ts`
```typescript
server: {
  proxy: {
    '/api/ollama': {
      target: 'http://localhost:11434',
      changeOrigin: true,
      rewrite: (path) => path.replace(/^\/api\/ollama/, ''),
    },
  },
}
```

---

## 🧪 테스트 방법

### 1. 개발 서버 실행

```bash
npm run dev
```

### 2. 브라우저 접속

- URL: `http://localhost:5173`
- 개발자 도구 열기 (F12)

### 3. AI 대화 테스트

1. **"질문" 탭** 클릭
2. **마이크 버튼** 클릭 (Push-to-Talk)
3. **질문**: "비트코인 전망해봐."
4. **콘솔 로그 확인**:
   ```
   [Ollama] 로컬 연결 성공, 로컬 우선 사용
   [Gemma3 Streaming] 요청 시작: { 
     prompt: '비트코인 전망해봐.', 
     url: '/api/ollama', 
     model: 'athena-merged-v1:latest' 
   }
   ```

---

## 📊 예상 성능

| 항목 | 측정값 | 비고 |
|------|--------|------|
| **첫 토큰 (TTFT)** | 3-5초 | 모델 로드 후 |
| **전체 응답** | 5-10초 | 질문 복잡도에 따라 |
| **모델** | athena-merged-v1:latest | 로컬 GPU 사용 |

---

## 🔍 문제 해결

### 1. "AI 서버에 연결할 수 없다" 에러

**원인**: Ollama 서비스 미실행

**해결**:
```bash
# Ollama 서비스 확인
curl http://localhost:11434/api/tags

# Ollama 실행 (Windows)
# Ollama 앱 실행 또는 서비스 시작
```

### 2. CORS 에러

**원인**: Vite 프록시 미작동

**해결**:
- `vite.config.ts` 확인
- 개발 서버 재시작 (`npm run dev`)

### 3. 모델 없음 에러

**원인**: `athena-merged-v1:latest` 모델 미설치

**해결**:
```bash
# 모델 설치 확인
ollama list

# 모델 설치 (필요 시)
ollama pull athena-merged-v1:latest
```

---

## ✅ 개발 워크플로우

```
1. 코드 수정
   ↓
2. 개발 서버 자동 리로드 (HMR)
   ↓
3. 브라우저에서 즉시 확인
   ↓
4. 만족스러우면 Git 커밋
   ↓
5. GitHub 푸시 (코드 저장용)
```

---

## 🚨 주의사항

### 프로덕션 환경 사용 안 함

- ❌ Vercel 자동 배포 비활성화 (또는 무시)
- ❌ 프로덕션 환경 체크 코드 제거됨
- ✅ 로컬 개발 환경에만 집중

### 로컬 PC 필수

- ✅ 로컬 PC 24시간 가동 필요
- ✅ Ollama 서비스 실행 필요
- ✅ 개발 서버 실행 필요 (`npm run dev`)

---

**작성일**: 2026-01-21  
**상태**: ✅ 로컬 개발 환경 최적화 완료

[Verified by Athena Auditor v1.2]




